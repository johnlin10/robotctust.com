@use '@/app/styles/_mixins' as mixins;

$offsetPadding: 28px;

.floatingActions {
  z-index: 1000;
  position: fixed;
  @include mixins.flexbox(row, start, center);
  gap: var(--space-0-5x);
  padding: 6px;
  height: 52px;
  max-width: calc(100% - $offsetPadding * 2);
  background: rgba(var(--background-rgb), 0.5);
  border: 1px solid var(--border);
  @include mixins.border-radius(26px);
  @include mixins.glass-blur(12px);
  @include mixins.transition(var(--transition-default));
  @include mixins.hide-scrollbar;
  overflow: hidden;
  overflow-x: auto;

  &.initialRender {
    opacity: 0;
    @include mixins.transition(var(--transition-default));

    $scale: 0.5;
    &.bottom {
      &.right {
        @include mixins.transform-container(
          translateY(100%) translateX(calc(50% + $offsetPadding * 2))
            scale($scale)
        );
      }
      &.center {
        @include mixins.transform-container(
          translateY(100%) translateX(-50%) scale($scale)
        );
      }
      &.left {
        @include mixins.transform-container(
          translateY(100%) translateX(calc((50% - $offsetPadding * 2) * -1))
            scale($scale)
        );
      }
    }
    &.top {
      &.right {
        @include mixins.transform-container(
          translateY(-100%) translateX($offsetPadding * 2) scale($scale)
        );
      }
      &.center {
        @include mixins.transform-container(
          translateY(-100%) translateX(-50%) scale($scale)
        );
      }
      &.left {
        @include mixins.transform-container(
          translateY(-100%) translateX(calc((50% - $offsetPadding * 2) * -1))
            scale($scale)
        );
      }
    }
  }

  &.isCompactHeader:not(:hover) {
    gap: 0;
    padding: 3px;
    height: 32px !important;

    &.top {
      top: var(--header-height-compact);
    }

    &.bottom {
      &.center {
        @include mixins.respond-to('phone') {
          bottom: calc($offsetPadding / 2);
        }
      }
    }

    > .actionButton {
      padding: 0 var(--space-0-75x);

      &.noLabel {
        padding: 0 var(--space-0-75x) !important;
      }

      > svg {
        font-size: 0.8rem !important;
      }
      > .actionLabel {
        font-size: 0.7rem !important;
      }
    }
  }

  &.singleAction {
    padding: 0;
    height: 48px;

    &.isCompactHeader {
      padding: 0;

      > .actionButton {
        padding: 0 var(--space);
      }
    }
  }

  &.showBackground {
    background: rgba(var(--background-rgb), 0.5);
  }

  // Align
  &.right {
    right: $offsetPadding;
  }
  &.center {
    left: 50%;
    transform: translateX(-50%);
  }
  &.left {
    left: $offsetPadding;
  }

  // Position
  &.top {
    top: var(--header-height);

    &.right {
      right: var(--space-2x);
    }
    &.left {
      left: var(--space-2x);
    }
  }
  &.bottom {
    bottom: $offsetPadding;

    // &.right,
    // &.left {
    //   bottom: calc(var(--bottom-safe-area) + var(--space));
    // }
  }

  > .actionButton {
    @include mixins.flexbox(row, center, center);
    gap: var(--space-0-5x);
    height: 100%;
    padding: 0 var(--space);
    min-width: max-content;
    font-size: 1rem;
    border: 1px solid transparent;
    white-space: nowrap;
    text-decoration: none;
    color: inherit;
    @include mixins.border-radius(24px);
    @include mixins.transition(var(--transition-default));

    &:hover {
      border: 1px solid var(--border);
      background: rgba(var(--background-tertiary-rgb), 0.5);
    }

    &.noLabel {
      padding: 0 var(--space);
    }

    // 禁用狀態
    &:disabled,
    &.disabled {
      opacity: 0.5;
      cursor: not-allowed;
      pointer-events: none;
      @include mixins.transform-container(none);

      &:hover {
        border: 1px solid transparent;
        background: transparent;
        @include mixins.transform-container(none);
      }
    }

    // 變體樣式
    &.primary {
      background: var(--primary);
      color: var(--text-on-primary);
    }

    &.danger {
      background: var(--danger);
      color: var(--text-on-danger);
    }

    // 自訂 action 樣式
    &.customAction {
      padding: 0;
      overflow: visible;
    }

    svg {
      font-size: 1.1rem;
      @include mixins.transition(var(--transition-default));
    }

    .actionLabel {
      font-size: 1rem;
      font-weight: 500;
      @include mixins.transition(var(--transition-default));
    }
  }
}
